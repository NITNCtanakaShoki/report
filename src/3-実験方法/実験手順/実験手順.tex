\documentclass[../../../main]{subfiles}

\begin{document}
    \subsection{実験手順}\label{subsec:method-procedure}

    本研究の実験手順は以下の通りである。まず、ユーザー間でポイントを取引し、ユーザーのポイントを確認できる機能を持つWeb APIサーバーを構築する。このサーバーでは、ユーザーの作成・削除、ポイント取引のイベントの作成・保存、過去の取引イベントから現在のユーザーのポイントを導出する機能が実装される。ポイントの導出方法は複数用意される。

    次に、実験用コンピュータにDockerをインストールし、Web APIサーバーとデータベースサーバーをCPUとメモリに制限をかけた状態で起動する。この環境設定は、リソース使用量の制御を可能にし、実験の精度を高める。

    計測ツールの準備も重要なステップである。このツールは、\texttt{docker container stats}コマンドを用いて、コンテナのCPU使用率、メモリ使用量、I/O使用量などを定期的に自動で取得し、計測用のデータベースに保存する。また、Web APIサーバーに対してイベントの作成と現在のポイントの取得を交互に行う。これにより、Web APIサーバーの負荷と応答時間を計測する。

    最後に、Web APIサーバーに対して、CPUやメモリの制限、データベースのインデックスの有無などの条件を変更し、それぞれの条件下での実験を行う。収集されたデータは、\texttt{docker container stats}で計測された値とアクセス時の計測値を結合して分析され、イベント数とCPU使用率、メモリ使用量、I/O使用量、処理時間の相関関係を調査する。

    これらの手順を通じて、イベントソーシングを適用したWeb APIサーバーの性能とリソース使用の相関を明らかにすることを目指す。


\end{document}